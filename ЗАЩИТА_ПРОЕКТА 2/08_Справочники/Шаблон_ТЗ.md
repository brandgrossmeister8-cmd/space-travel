# [TZ-XX] [Название проекта]

> **Шаблон разработан на основе:** ГОСТ 34.602-2020, лучших практик [Сбера](https://developers.sber.ru/help/business-development/technical-specification), [X5 Tech](https://habr.com/ru/companies/X5Tech/articles/744888/), [Pandium](https://www.pandium.com/blogs/what-to-include-in-an-integration-requirements-document-template-included)

---

## ПАСПОРТ ПРОЕКТА

| Параметр | Значение |
|----------|----------|
| **Номер ТЗ** | TZ-XX |
| **Название** | [Краткое название проекта] |
| **Версия** | 1.0 |
| **Дата** | YYYY-MM-DD |
| **Статус** | Черновик / На согласовании / Утверждено |
| **Заказчик** | [ФИО, должность, департамент] |
| **Владелец процесса** | [ФИО, должность] |
| **Исполнитель** | [IT-отдел / Название подрядчика] |
| **Бюджет** | XXX 000 ₽ (единовременно) + XX 000 ₽/мес |
| **Срок реализации** | XX недель |
| **Связанные точки** | AUTO-XXX, DASH-XX (из 3.4_automation_potential.md) |

---

## 1. БИЗНЕС-КОНТЕКСТ

### 1.1. Проблема (AS-IS)

> **Формулировка проблемы:** Кратко опишите, что не работает или работает плохо.

**Текущая ситуация:**
- [Описание текущего процесса]
- [Какие системы используются]
- [Кто выполняет работу]

**Количественные показатели проблемы:**

| Метрика | Текущее значение | Источник данных |
|---------|------------------|-----------------|
| Время на процесс | XX ч/мес | Анкеты L3 / Замеры |
| Количество ошибок | XX% | Статистика за период |
| Задержки | XX дней | Средний срок |
| Потери (деньги) | XXX 000 ₽/мес | Расчёт / Оценка |

**Причины проблемы:**
1. [Корневая причина 1]
2. [Корневая причина 2]
3. [Корневая причина 3]

### 1.2. Цель проекта (TO-BE)

> **Формулировка цели по SMART:**
> - **S**pecific: [Что конкретно будет сделано]
> - **M**easurable: [Как измерим успех]
> - **A**chievable: [Почему это реализуемо]
> - **R**elevant: [Как связано с бизнес-целями]
> - **T**ime-bound: [К какому сроку]

**Целевое состояние:**
- [Как будет работать процесс после внедрения]
- [Что изменится для пользователей]

**Целевые показатели:**

| Метрика | AS-IS | TO-BE | Улучшение |
|---------|-------|-------|-----------|
| Время на процесс | XX ч/мес | X ч/мес | -XX% |
| Количество ошибок | XX% | X% | -XX п.п. |
| Задержки | XX дней | X дней | -XX% |

### 1.3. Ожидаемый эффект (ROI)

| Показатель | Значение | Расчёт |
|------------|----------|--------|
| **Экономия времени** | XX ч/мес | [Формула] |
| **Экономия в деньгах** | XXX 000 ₽/год | XX ч × XXX ₽/ч × 12 мес |
| **Затраты на внедрение** | XXX 000 ₽ | Единовременно |
| **Ежемесячные затраты** | XX 000 ₽/мес | Лицензии, поддержка |
| **Срок окупаемости** | X месяцев | Затраты ÷ Экономия/мес |
| **ROI (год 1)** | XX% | (Экономия − Затраты) ÷ Инвестиции |

### 1.4. Scope (границы проекта)

**Входит в scope:**
- [ ] [Функция / Интеграция 1]
- [ ] [Функция / Интеграция 2]
- [ ] [Функция / Интеграция 3]

**НЕ входит в scope (будет в следующих версиях):**
- [ ] [Функция, которая отложена]
- [ ] [Интеграция, которая отложена]

**Зависимости (что должно быть готово ДО начала):**

| ID | Зависимость | Ответственный | Статус | Дедлайн |
|----|-------------|---------------|--------|---------|
| P-01 | Аудит API САМО-тур | Логвинов Г.А. | ⬜ | DD.MM.YYYY |
| P-04 | Конфигурация Битрикс24 | Логвинов Г.А. | ⬜ | DD.MM.YYYY |

---

## 2. ФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ

### 2.1. Пользователи системы

| Роль | Описание | Кол-во | Ключевые задачи |
|------|----------|--------|-----------------|
| [Роль 1] | [Кто это] | XX | [Что делает в системе] |
| [Роль 2] | [Кто это] | XX | [Что делает в системе] |
| Администратор | IT-отдел | 2 | Настройка, мониторинг, поддержка |

### 2.2. User Stories

> **Формат:** Как [роль], я хочу [действие], чтобы [результат/ценность]

#### US-01: [Название функции]

| Поле | Значение |
|------|----------|
| **ID** | US-01 |
| **Приоритет** | Must Have / Should Have / Could Have |
| **Роль** | [Кто использует] |
| **Действие** | [Что хочет сделать] |
| **Результат** | [Какую ценность получает] |
| **Связь с AUTO** | AUTO-XXX |

**Описание:**
> Как [роль], я хочу [действие], чтобы [результат].

**Критерий приёмки (Definition of Done):**
- [ ] [Конкретный, измеримый критерий 1]
- [ ] [Конкретный, измеримый критерий 2]
- [ ] [Конкретный, измеримый критерий 3]

**Основной сценарий (Happy Path):**
1. Пользователь [действие 1]
2. Система [реакция 1]
3. Пользователь [действие 2]
4. Система [реакция 2]
5. Результат: [что получилось]

**Альтернативные сценарии:**

| # | Условие | Действие системы |
|---|---------|------------------|
| A1 | [Если произошло X] | [Система делает Y] |
| A2 | [Если данные неполные] | [Показать ошибку: «...»] |

**Сценарии ошибок:**

| # | Ошибка | Сообщение пользователю | Действие системы |
|---|--------|------------------------|------------------|
| E1 | [API недоступен] | «Сервис временно недоступен. Попробуйте через 5 минут» | Retry 3 раза, логирование, алерт админу |
| E2 | [Данные не найдены] | «Запись не найдена» | Логирование |

---

#### US-02: [Название функции]

_(повторить структуру US-01 для каждой функции)_

---

### 2.3. Сводная таблица требований

| ID | Название | Приоритет | Критерий приёмки | Тест-кейс |
|----|----------|-----------|------------------|-----------|
| US-01 | [Название] | Must | [Кратко] | TC-01 |
| US-02 | [Название] | Must | [Кратко] | TC-02 |
| US-03 | [Название] | Should | [Кратко] | TC-03 |
| US-04 | [Название] | Could | [Кратко] | TC-04 |

**Приоритеты:**
- **Must Have** — без этого проект не имеет смысла (100% реализация)
- **Should Have** — важно, но можно отложить на v1.1 (90% реализация)
- **Could Have** — хорошо бы, если останется время (50% реализация)
- **Won't Have** — не в этой версии (0%)

---

## 3. ТРЕБОВАНИЯ К ИНТЕГРАЦИИ

### 3.1. Системы-участники

| Система | Версия | Роль | API | Документация |
|---------|--------|------|-----|--------------|
| [САМО-тур] | [X.X] | Источник данных | REST API | [Ссылка / «Требует P-01»] |
| [Битрикс24] | [Cloud] | Получатель | REST API | [https://dev.1c-bitrix.ru/rest_help/] |
| [1С Бухгалтерия] | [3.0.XX] | Получатель | OData / Файл | [Требует P-05] |

### 3.2. Потоки данных

```
┌─────────────────┐                    ┌─────────────────┐
│                 │   [Данные, событие] │                 │
│   Система A     │ ──────────────────→ │   Система B     │
│   (Источник)    │     [Частота]       │   (Получатель)  │
│                 │                     │                 │
└─────────────────┘                     └─────────────────┘
```

| ID | Источник | Получатель | Данные | Триггер | Частота | Формат |
|----|----------|------------|--------|---------|---------|--------|
| DF-01 | [Система A] | [Система B] | [Какие поля] | [Событие / Расписание] | [Real-time / Каждые X мин] | JSON / XML |
| DF-02 | [Система B] | [Система A] | [Какие поля] | [Событие] | [Real-time] | JSON |

### 3.3. Описание сущностей и полей

#### Сущность: [Название, например «Агент»]

| Поле | Тип | Обязательное | Описание | Пример |
|------|-----|--------------|----------|--------|
| id | integer | Да | Уникальный идентификатор | 12345 |
| name | string(255) | Да | Название агентства | «ООО Турсервис» |
| inn | string(12) | Да | ИНН организации | «7701234567» |
| credit_limit | decimal(15,2) | Нет | Кредитный лимит в рублях | 500000.00 |
| status | enum | Да | Статус: active, blocked, pending | «active» |
| updated_at | datetime | Да | Дата последнего обновления | «2026-02-18T14:30:00Z» |

### 3.4. Спецификация API

#### Endpoint: [Название операции]

| Параметр | Значение |
|----------|----------|
| **Метод** | GET / POST / PUT / DELETE |
| **URL** | `/api/v1/resource/{id}` |
| **Авторизация** | Bearer Token / API Key / OAuth 2.0 |
| **Rate Limit** | XX запросов/минуту |
| **Timeout** | XX секунд |

**Headers:**
```
Authorization: Bearer {token}
Content-Type: application/json
Accept: application/json
```

**Request (пример):**
```json
{
  "field1": "value1",
  "field2": 123,
  "field3": true
}
```

**Response 200 OK (пример):**
```json
{
  "success": true,
  "data": {
    "id": 12345,
    "field1": "value1",
    "created_at": "2026-02-18T14:30:00Z"
  }
}
```

**Response 400 Bad Request:**
```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Поле 'field1' обязательно для заполнения"
  }
}
```

**Коды ответов:**

| Код | Значение | Действие системы |
|-----|----------|------------------|
| 200 | Успех | Обработать данные |
| 400 | Ошибка валидации | Логировать, показать ошибку пользователю |
| 401 | Не авторизован | Обновить токен, повторить запрос |
| 404 | Не найдено | Логировать, показать «Данные не найдены» |
| 429 | Rate limit | Подождать X секунд, повторить |
| 500 | Ошибка сервера | Retry 3 раза с интервалом 5 сек, алерт админу |

### 3.5. Обработка ошибок и retry-логика

| Тип ошибки | Retry | Интервал | Макс. попыток | Fallback |
|------------|-------|----------|---------------|----------|
| Таймаут | Да | 5 сек | 3 | Поставить в очередь, алерт |
| 5xx ошибка | Да | 10 сек | 3 | Поставить в очередь, алерт |
| 4xx ошибка | Нет | — | 1 | Логировать, уведомить пользователя |
| Сеть недоступна | Да | 30 сек | 5 | Поставить в очередь, алерт |

### 3.6. Мониторинг интеграции

| Метрика | Порог алерта | Канал уведомления |
|---------|--------------|-------------------|
| Время ответа API | > 5 сек | Email IT-отдел |
| Ошибки 5xx | > 5 за 10 мин | Telegram IT-отдел |
| Очередь необработанных | > 100 записей | Email + Telegram |
| Рассинхронизация данных | > 1% | Ежедневный отчёт |

---

## 4. НЕФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ

### 4.1. Производительность

| Метрика | Требование | Метод проверки |
|---------|------------|----------------|
| Время отклика API | < 2 сек (95 перцентиль) | Нагрузочное тестирование |
| Время синхронизации | < 5 мин для 1000 записей | Замер на тестовых данных |
| Пропускная способность | > 100 запросов/мин | Нагрузочное тестирование |
| Время формирования отчёта | < 10 сек | Замер на production-данных |

### 4.2. Надёжность и доступность

| Метрика | Требование |
|---------|------------|
| Uptime | > 99.5% (в рабочее время 9:00-21:00) |
| Время восстановления (RTO) | < 4 часов |
| Допустимая потеря данных (RPO) | < 1 час |
| Резервное копирование | Ежедневно, хранение 30 дней |

### 4.3. Безопасность

| Требование | Реализация |
|------------|------------|
| Шифрование в передаче | TLS 1.2+ |
| Авторизация API | OAuth 2.0 / API Key |
| Логирование доступа | Все операции с персональными данными |
| Ролевая модель | Разграничение по ролям (п. 2.1) |
| Хранение секретов | Vault / Environment variables (не в коде) |

### 4.4. Масштабируемость

| Параметр | Текущая нагрузка | Планируемая (год) | Пиковая (сезон) |
|----------|------------------|-------------------|-----------------|
| Пользователей | XX | XX (+XX%) | XX (+XX%) |
| Записей/день | XXX | XXX | XXX (+300%) |
| Запросов API/мин | XX | XX | XX |

> **Специфика Space Travel:** Пик нагрузки — май-август (сезон отпусков). Система должна выдерживать +300% к базовой нагрузке.

---

## 5. ЭТАПЫ РЕАЛИЗАЦИИ

### 5.1. План-график

| Этап | Название | Длительность | Даты | Результат |
|------|----------|--------------|------|-----------|
| 0 | Подготовка | X дней | DD.MM – DD.MM | Доступы, среда, тест-данные |
| 1 | Разработка MVP | X дней | DD.MM – DD.MM | Работающий прототип |
| 2 | Тестирование | X дней | DD.MM – DD.MM | Протокол тестирования |
| 3 | Пилот | X дней | DD.MM – DD.MM | Отчёт о пилоте |
| 4 | Доработка | X дней | DD.MM – DD.MM | Исправления по пилоту |
| 5 | Внедрение | X дней | DD.MM – DD.MM | Система в production |
| 6 | Стабилизация | X дней | DD.MM – DD.MM | Закрытие проекта |

**Диаграмма Ганта:**
```
Этап 0: ████
Этап 1:     ████████████
Этап 2:                 ██████
Этап 3:                       ████████
Этап 4:                               ████
Этап 5:                                   ██████
Этап 6:                                         ████
        Нед1  Нед2  Нед3  Нед4  Нед5  Нед6  Нед7  Нед8
```

### 5.2. Ответственные (RACI)

| Активность | PM | Разработчик | IT-архитектор | Заказчик | Тестировщик |
|------------|----|----|----|----|-----|
| Подготовка среды | A | R | C | I | I |
| Разработка | A | R | C | I | I |
| Code Review | I | R | A | I | I |
| Тестирование | A | C | I | I | R |
| UAT (приёмка) | A | C | I | R | C |
| Внедрение | A | R | C | I | I |
| Документирование | A | R | C | I | I |

**R** = Responsible (делает), **A** = Accountable (отвечает), **C** = Consulted, **I** = Informed

### 5.3. Риски

| # | Риск | Вероятность | Влияние | Митигация |
|---|------|-------------|---------|-----------|
| 1 | API САМО недоступен или ограничен | Средняя | Высокое | P-01 выявит до начала. Альтернатива: файловый обмен |
| 2 | Сопротивление пользователей | Низкая | Среднее | Обучение, пилот на лояльном отделе |
| 3 | Перерасход бюджета | Средняя | Среднее | Фиксированный контракт, еженедельный контроль |
| 4 | Недоступность ключевых сотрудников | Низкая | Высокое | Backup-ответственные, документирование |

---

## 6. ПРИЁМОЧНЫЕ ИСПЫТАНИЯ

### 6.1. Виды тестирования

| Вид | Ответственный | Критерий прохождения |
|-----|---------------|----------------------|
| Unit-тесты | Разработчик | 80% покрытие кода |
| Интеграционные тесты | Разработчик | Все DF-* потоки работают |
| Функциональное тестирование | Тестировщик | 100% Must Have, 90% Should Have |
| UAT (приёмка пользователями) | Заказчик | Подписан акт приёмки |
| Нагрузочное тестирование | IT-отдел | Соответствие п. 4.1 |

### 6.2. Тест-кейсы

| ID | Название | US | Предусловия | Шаги | Ожидаемый результат |
|----|----------|----|----|------|-----|
| TC-01 | [Название теста] | US-01 | [Что должно быть готово] | 1. [Шаг 1]<br>2. [Шаг 2]<br>3. [Шаг 3] | [Конкретный, проверяемый результат] |
| TC-02 | [Название теста] | US-01 | [Предусловия] | [Шаги] | [Результат] |
| TC-03 | [Ошибка: X] | US-01 | [Система в состоянии Y] | 1. Ввести некорректные данные | Сообщение об ошибке: «...» |

### 6.3. Критерии успешной приёмки

| # | Критерий | Порог | Метод проверки |
|---|----------|-------|----------------|
| 1 | Функциональность Must Have | 100% тестов пройдено | Протокол тестирования |
| 2 | Функциональность Should Have | 90% тестов пройдено | Протокол тестирования |
| 3 | Производительность | Соответствует п. 4.1 | Отчёт нагрузочного теста |
| 4 | Корректность данных | 100% синхронизация | Сверка выборки 100 записей |
| 5 | Отсутствие критических багов | 0 blocker/critical | Баг-трекер |
| 6 | Документация | Инструкции готовы | Наличие файлов |

### 6.4. Процедура приёмки

1. **Демонстрация** — исполнитель демонстрирует работу системы (1-2 часа)
2. **Тестирование** — заказчик проверяет тест-кейсы (1-3 дня)
3. **Протокол** — фиксация результатов, список замечаний
4. **Исправление** — устранение замечаний (если есть)
5. **Повторная проверка** — проверка исправлений
6. **Акт приёмки** — подписание при соблюдении критериев п. 6.3

---

## 7. ДОКУМЕНТАЦИЯ И ОБУЧЕНИЕ

### 7.1. Документация

| Документ | Ответственный | Срок |
|----------|---------------|------|
| Руководство пользователя | Разработчик | До этапа «Пилот» |
| Руководство администратора | Разработчик | До этапа «Внедрение» |
| API-документация | Разработчик | До этапа «Тестирование» |
| Описание архитектуры | IT-архитектор | До этапа «Внедрение» |

### 7.2. Обучение

| Группа | Формат | Длительность | Срок |
|--------|--------|--------------|------|
| Пользователи (основная) | Вебинар + практика | 2 часа | Этап «Пилот» |
| Администраторы | Индивидуально | 4 часа | Этап «Внедрение» |

---

## 8. ПОДДЕРЖКА И SLA

### 8.1. Гарантийный период

- **Длительность:** 3 месяца с момента подписания акта приёмки
- **Включает:** исправление дефектов, консультации
- **Не включает:** новая функциональность, изменение требований

### 8.2. SLA (после гарантийного периода)

| Приоритет | Описание | Время реакции | Время решения |
|-----------|----------|---------------|---------------|
| P1 — Критический | Система полностью недоступна | 1 час | 4 часа |
| P2 — Высокий | Ключевая функция не работает | 4 часа | 1 рабочий день |
| P3 — Средний | Функция работает с ограничениями | 1 рабочий день | 3 рабочих дня |
| P4 — Низкий | Косметические дефекты, улучшения | 3 рабочих дня | По согласованию |

---

## ПРИЛОЖЕНИЯ

### Приложение A: Диаграмма архитектуры

```
[Вставить диаграмму]
```

### Приложение B: Примеры данных

```json
{
  "example": "Примеры реальных данных для тестирования"
}
```

### Приложение C: Макеты UI (если применимо)

[Ссылка на Figma / скриншоты]

### Приложение D: Глоссарий

| Термин | Определение |
|--------|-------------|
| [Термин 1] | [Определение] |
| [Термин 2] | [Определение] |

---

## ИСТОРИЯ ИЗМЕНЕНИЙ

| Версия | Дата | Автор | Изменения |
|--------|------|-------|-----------|
| 1.0 | DD.MM.YYYY | [ФИО] | Первоначальная версия |
| 1.1 | DD.MM.YYYY | [ФИО] | [Описание изменений] |

---

## СОГЛАСОВАНИЯ

| Роль | ФИО | Дата | Статус |
|------|-----|------|--------|
| Заказчик (владелец процесса) | | | ⬜ |
| Руководитель IT | | | ⬜ |
| PM проекта | | | ⬜ |
| Исполнитель | | | ⬜ |

---

## ЧЕК-ЛИСТ ГОТОВНОСТИ ТЗ

> Перед передачей разработчику проверьте:

**Общие требования:**
- [ ] Есть измеримая цель (KPI до/после)
- [ ] Определён scope (что входит, что НЕ входит)
- [ ] Указан бюджет и сроки
- [ ] Назначены ответственные (RACI)
- [ ] Указаны зависимости (prerequisites)

**Функциональные требования:**
- [ ] Описаны ВСЕ user stories
- [ ] Для каждой US есть критерий приёмки
- [ ] Описаны альтернативные сценарии
- [ ] Описаны сценарии ошибок
- [ ] Есть приоритеты (Must/Should/Could)

**Интеграции:**
- [ ] Указаны ВСЕ системы с версиями
- [ ] Описаны потоки данных (таблица + диаграмма)
- [ ] Есть примеры API (запрос/ответ)
- [ ] Описана обработка ошибок и retry
- [ ] Указаны ограничения API (rate limit)

**Нефункциональные:**
- [ ] Производительность (время отклика, пропускная способность)
- [ ] Надёжность (uptime, RTO, RPO)
- [ ] Безопасность (авторизация, шифрование)
- [ ] Масштабируемость (текущая + пиковая нагрузка)

**Тестирование:**
- [ ] Есть тест-кейсы для ключевых US
- [ ] Определены критерии приёмки
- [ ] Описана процедура приёмки

**Приложения:**
- [ ] Диаграмма архитектуры
- [ ] Примеры данных
- [ ] Глоссарий (если есть специфичные термины)
