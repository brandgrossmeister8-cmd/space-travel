# ТЗ-23: IT-мониторинг

**Версия:** 1.0
**Дата:** 2026-02-25
**Статус:** Планируется
**Волна:** 4 (Развитие)
**Владелец:** Логвинов Г.А. (IT)

---

## 1. Метаданные

| Параметр | Значение |
|----------|----------|
| ID | TZ-23 |
| Название | IT-мониторинг |
| Приоритет | Низкий |
| Категория | Дашборд / Инфраструктура |
| AUTO-точки | DASH-15 |
| Экономия | 7 ч/мес |
| Затронутые отделы | IT |

---

## 2. Проблема (AS-IS)

### 2.1. Текущее состояние

**DASH-15: Дашборд IT-инфраструктуры**
- Нет единой картины состояния IT-систем
- Время на ручной мониторинг: 7 ч/мес
- Проблемы обнаруживаются постфактум (от пользователей)

### 2.2. Детализация проблемы

1. **Текущий мониторинг:**
   - Ручная проверка доступности систем
   - Нет централизованных алертов
   - Логи разбросаны по серверам

2. **Критичные системы:**
   - САМО-тур (бронирования)
   - Сайт spacetravel.ru
   - Битрикс24 (CRM)
   - 1С (финансы)
   - Телефония UIS

3. **Последствия простоев:**
   - 1 час простоя САМО = потеря ~50 000 ₽
   - Простой сайта = потеря лидов
   - Простой телефонии = недозвоны клиентов

### 2.3. Боли пользователей

1. **IT-отдел:** Реактивный режим работы, нет времени на развитие
2. **Бизнес:** Узнают о проблемах от клиентов
3. **Руководство:** Нет видимости SLA систем

---

## 3. Цель (TO-BE)

### 3.1. Целевое состояние

1. **Единый дашборд** — состояние всех критичных систем в реальном времени
2. **Проактивные алерты** — уведомления до критического состояния
3. **Метрики SLA** — доступность, время отклика, инциденты

### 3.2. Ожидаемые результаты

| Метрика | AS-IS | TO-BE | Улучшение |
|---------|-------|-------|-----------|
| Ручной мониторинг | 7 ч/мес | 2 ч/мес | -71% |
| Время обнаружения проблемы | 15-60 мин | < 5 мин | -90% |
| MTTR (время восстановления) | 2-4 часа | 30-60 мин | -75% |

---

## 4. Объём работ

### 4.1. Включено в ТЗ

| # | Компонент | Описание |
|---|-----------|----------|
| 1 | Мониторинг доступности | Ping, HTTP-проверки критичных систем |
| 2 | Мониторинг производительности | CPU, RAM, диск серверов |
| 3 | Алерты | Email/Telegram при проблемах |
| 4 | Дашборд состояния | Визуализация в реальном времени |
| 5 | История инцидентов | Логирование, аналитика |
| 6 | Отчёт SLA | Ежемесячный отчёт по доступности |

### 4.2. Исключено из ТЗ

- APM (мониторинг производительности приложений)
- Логирование на уровне приложений
- Автоматическое восстановление (только алерты)

---

## 5. Входные и выходные данные

### 5.1. Входные данные

| Источник | Данные | Формат |
|----------|--------|--------|
| Серверы | CPU, RAM, диск | SNMP / агент |
| Веб-сервисы | HTTP-статус, время отклика | HTTP |
| Базы данных | Доступность, размер | SQL |
| Сетевое оборудование | Статус портов | SNMP |

### 5.2. Выходные данные

| Получатель | Данные | Формат |
|------------|--------|--------|
| IT-отдел | Алерты о проблемах | Email / Telegram |
| IT-отдел | Дашборд состояния | Web |
| Руководство | Отчёт SLA | PDF / Email |

---

## 6. Технические требования

### 6.1. Объекты мониторинга

| Система | Тип проверки | Частота |
|---------|--------------|---------|
| САМО-тур | HTTP + SQL | 1 мин |
| spacetravel.ru | HTTP | 1 мин |
| Битрикс24 | HTTP + API | 5 мин |
| 1С | TCP + SQL | 5 мин |
| Телефония UIS | SIP | 1 мин |
| Почтовый сервер | SMTP | 5 мин |

### 6.2. Пороги алертов

| Метрика | Warning | Critical |
|---------|---------|----------|
| Доступность | < 99.5% (5 мин) | < 99% (1 мин) |
| Время отклика HTTP | > 3 сек | > 10 сек |
| CPU | > 80% (5 мин) | > 95% (1 мин) |
| RAM | > 85% | > 95% |
| Диск | > 80% | > 90% |

### 6.3. Инструменты

| Задача | Инструмент | Обоснование |
|--------|------------|-------------|
| Мониторинг | Zabbix / Prometheus | Open-source, гибкость |
| Визуализация | Grafana | Интеграция, красивые дашборды |
| Алерты | Telegram Bot + Email | Мгновенная доставка |

### 6.4. Нефункциональные требования

| Требование | Значение |
|------------|----------|
| Интервал опроса | 1-5 минут |
| Хранение метрик | 12 месяцев |
| Доступность системы мониторинга | 99.9% |
| Время доставки алерта | < 1 минута |

---

## 7. План реализации

| Фаза | Задачи | Срок | Трудозатраты |
|------|--------|------|--------------|
| 1. Инвентаризация | Список объектов, метрик, порогов | 1 неделя | 15 ч |
| 2. Установка Zabbix/Prometheus | Развёртывание, настройка | 1 неделя | 20 ч |
| 3. Настройка мониторинга | Агенты, проверки, шаблоны | 2 недели | 40 ч |
| 4. Grafana дашборды | Визуализация, панели | 1 неделя | 15 ч |
| 5. Алерты | Telegram-бот, Email, эскалация | 1 неделя | 15 ч |
| 6. Отчёты SLA | Шаблон, автогенерация | 1 неделя | 10 ч |
| 7. Тестирование | Проверка алертов, документация | 1 неделя | 10 ч |
| **ИТОГО** | | **8 недель** | **125 ч** |

---

## 8. Критерии приёмки

| # | Критерий | Метод проверки |
|---|----------|----------------|
| 1 | Все критичные системы на мониторинге | Проверка списка |
| 2 | Алерт приходит в течение 1 минуты | Тест с искусственным сбоем |
| 3 | Дашборд отображает актуальные данные | Визуальная проверка |
| 4 | История хранится 12 месяцев | Проверка retention |
| 5 | Отчёт SLA формируется автоматически | Генерация за прошлый месяц |

---

## 9. Риски и митигация

| Риск | Вероятность | Влияние | Митигация |
|------|-------------|---------|-----------|
| Ложные срабатывания | Средняя | Низкое | Настройка порогов, hysteresis |
| Нагрузка на серверы от агентов | Низкая | Низкое | Лёгкие агенты, оптимизация |
| Сбой самой системы мониторинга | Низкая | Высокое | Резервирование, внешний watchdog |

---

## 10. Оценка

### 10.1. Трудозатраты

| Роль | Часы |
|------|------|
| DevOps / системный администратор | 100 |
| Разработчик (Telegram-бот, отчёты) | 25 |
| **ИТОГО** | **125 ч** |

### 10.2. Стоимость

| Статья | Сумма |
|--------|-------|
| Разработка (125 ч × 3 000 ₽) | 375 000 ₽ |
| Сервер мониторинга | ~5 000 ₽/мес |
| Лицензии | 0 ₽ (open-source) |
| **ИТОГО (разработка)** | **375 000 ₽** |

### 10.3. ROI

| Показатель | Значение |
|------------|----------|
| Экономия времени | 5 ч/мес (7 - 2) |
| Экономия в рублях (L2, 1 190 ₽/ч) | 71 400 ₽/год |
| Предотвращённые потери от простоев | ~200 000 ₽/год* |
| Затраты на разработку | 375 000 ₽ |
| Срок окупаемости | ~14 месяцев |

*Оценка: 4 инцидента/год × 1 час × 50 000 ₽/час = 200 000 ₽

---

*Документ создан: 2026-02-25*
*Версия: 1.0*
