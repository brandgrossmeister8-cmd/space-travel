# ТЗ-14: Интеграции с авиакомпаниями

**Версия:** 1.0
**Дата:** 2026-02-25
**Статус:** Планируется
**Волна:** 4 (Развитие)
**Владелец:** Баландина О.А. (операционные доходы)

---

## 1. Метаданные

| Параметр | Значение |
|----------|----------|
| ID | TZ-14 |
| Название | Интеграции с авиакомпаниями |
| Приоритет | Средний |
| Категория | Интеграция |
| AUTO-точки | AUTO-010, AUTO-019, AUTO-020 |
| Экономия | 49 ч/мес |
| Затронутые отделы | Транспортный отдел, Тарификация |

---

## 2. Проблема (AS-IS)

### 2.1. Текущее состояние

**AUTO-010: Сверка бронирований САМО ↔ GDS**
- Ежедневная ручная сверка бронирований между САМО-тур и GDS-системами (Amadeus, Galileo, Sabre)
- Время выполнения: 26 ч/мес
- Риск расхождений и потери бронирований

**AUTO-019: Парсинг расписаний авиакомпаний**
- Ручной мониторинг изменений расписания рейсов
- Время выполнения: 11 ч/мес
- Задержки в актуализации данных о рейсах

**AUTO-020: Уведомления об изменениях рейсов**
- Отсутствие автоматических алертов при изменении расписания
- Время выполнения: 12 ч/мес
- Клиенты узнают об изменениях с опозданием

### 2.2. Боли пользователей

1. **Транспортный отдел:** Ежедневная рутина сверки отнимает время от работы с клиентами
2. **Клиенты:** Несвоевременное информирование об изменениях рейсов
3. **Руководство:** Риск финансовых потерь из-за несверённых бронирований

---

## 3. Цель (TO-BE)

### 3.1. Целевое состояние

1. **Автоматическая сверка САМО ↔ GDS** — ежедневный автоматический отчёт о расхождениях
2. **Парсинг расписаний** — автоматический мониторинг изменений с уведомлениями
3. **Алерты клиентам** — автоматические SMS/Email при изменении рейсов

### 3.2. Ожидаемые результаты

| Метрика | AS-IS | TO-BE | Улучшение |
|---------|-------|-------|-----------|
| Время на сверку | 26 ч/мес | 5 ч/мес | -80% |
| Время на мониторинг расписаний | 11 ч/мес | 2 ч/мес | -82% |
| Время на уведомления | 12 ч/мес | 1 ч/мес | -92% |
| **ИТОГО** | **49 ч/мес** | **8 ч/мес** | **-84%** |

---

## 4. Объём работ

### 4.1. Включено в ТЗ

| # | Компонент | Описание |
|---|-----------|----------|
| 1 | Модуль сверки САМО-GDS | Автоматическое сравнение бронирований, отчёт о расхождениях |
| 2 | Парсер расписаний | Мониторинг API авиакомпаний и GDS на изменения |
| 3 | Система уведомлений | Рассылка SMS/Email клиентам при изменениях |
| 4 | Дашборд мониторинга | Визуализация статуса интеграций и расхождений |

### 4.2. Исключено из ТЗ

- Интеграция с новыми GDS (только существующие: Amadeus, Galileo, Sabre)
- Автоматическое исправление расхождений (только отчётность)
- Изменение бизнес-процессов бронирования

---

## 5. Входные и выходные данные

### 5.1. Входные данные

| Источник | Данные | Формат |
|----------|--------|--------|
| САМО-тур | Бронирования авиабилетов | API / выгрузка |
| GDS (Amadeus, Galileo, Sabre) | Бронирования, расписания | API |
| Авиакомпании | Изменения расписаний | API / RSS |

### 5.2. Выходные данные

| Получатель | Данные | Формат |
|------------|--------|--------|
| Транспортный отдел | Отчёт о расхождениях | Email / Excel |
| Клиенты | Уведомления об изменениях | SMS / Email |
| Руководство | Дашборд статуса | Power BI |

---

## 6. Технические требования

### 6.1. Интеграции

| Система | Тип интеграции | Метод |
|---------|----------------|-------|
| САМО-тур | Чтение данных | API (если доступен) / выгрузка CSV |
| Amadeus | Двусторонняя | Amadeus API |
| Galileo | Двусторонняя | Galileo API |
| Sabre | Двусторонняя | Sabre API |
| Юнисендер | Отправка уведомлений | API |
| SMS-провайдер | Отправка SMS | API |

### 6.2. Нефункциональные требования

| Требование | Значение |
|------------|----------|
| Частота сверки | Ежедневно, 06:00 |
| Мониторинг расписаний | Каждые 4 часа |
| Время отправки уведомления | < 15 минут после изменения |
| Доступность системы | 99% |

---

## 7. План реализации

| Фаза | Задачи | Срок | Трудозатраты |
|------|--------|------|--------------|
| 1. Анализ | Аудит API GDS, требования к данным | 2 недели | 40 ч |
| 2. Разработка модуля сверки | Интеграция САМО-GDS, отчёт расхождений | 4 недели | 120 ч |
| 3. Парсер расписаний | Мониторинг изменений, хранение истории | 3 недели | 80 ч |
| 4. Система уведомлений | SMS/Email рассылка, шаблоны | 2 недели | 60 ч |
| 5. Тестирование и запуск | Пилот, исправления, документация | 2 недели | 40 ч |
| **ИТОГО** | | **13 недель** | **340 ч** |

---

## 8. Критерии приёмки

| # | Критерий | Метод проверки |
|---|----------|----------------|
| 1 | Автоматический отчёт о расхождениях формируется ежедневно | Проверка email в 06:30 |
| 2 | Расхождения выявляются с точностью 100% | Сверка с ручной проверкой |
| 3 | Изменения расписаний отслеживаются в течение 4 часов | Тест с реальным изменением |
| 4 | Клиенты получают уведомления в течение 15 минут | Замер времени доставки |
| 5 | Дашборд отображает актуальный статус | Визуальная проверка |

---

## 9. Риски и митигация

| Риск | Вероятность | Влияние | Митигация |
|------|-------------|---------|-----------|
| Ограничения API GDS | Средняя | Высокое | Использование альтернативных методов (файловый обмен) |
| Изменение форматов данных авиакомпаний | Средняя | Среднее | Модульная архитектура парсеров |
| Превышение лимитов запросов API | Низкая | Среднее | Кэширование, пакетная обработка |

---

## 10. Оценка

### 10.1. Трудозатраты

| Роль | Часы |
|------|------|
| Аналитик | 60 |
| Разработчик backend | 200 |
| Разработчик интеграций | 60 |
| QA | 20 |
| **ИТОГО** | **340 ч** |

### 10.2. Стоимость

| Статья | Сумма |
|--------|-------|
| Разработка (340 ч × 3 000 ₽) | 1 020 000 ₽ |
| Лицензии API GDS | По тарифам GDS |
| SMS-рассылка | ~10 000 ₽/мес |
| **ИТОГО (разработка)** | **1 020 000 ₽** |

### 10.3. ROI

| Показатель | Значение |
|------------|----------|
| Экономия времени | 41 ч/мес (49 - 8) |
| Экономия в рублях (L3, 595 ₽/ч) | 292 740 ₽/год |
| Затраты на разработку | 1 020 000 ₽ |
| Срок окупаемости | ~42 месяца |
| Качественные benefits | Снижение рисков, улучшение клиентского опыта |

---

*Документ создан: 2026-02-25*
*Версия: 1.0*
