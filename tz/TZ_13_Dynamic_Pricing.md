# [TZ-13] Динамическое ценообразование чартерных туров

> **Тип документа:** Техническое задание для тендера (ML-проект)
> **Шаблон разработан на основе:** ГОСТ 34.602-2020, лучших практик Revenue Management

---

## ПАСПОРТ ПРОЕКТА

| Параметр | Значение |
|----------|----------|
| **Номер ТЗ** | TZ-13 |
| **Название** | Система динамического ценообразования чартерных туров |
| **Версия** | 1.0 |
| **Дата** | 2026-02-19 |
| **Статус** | Черновик (для тендера) |
| **Заказчик** | Баландина О.А., директор департамента операционных доходов |
| **Владелец процесса** | Баландина О.А. |
| **Исполнитель** | **Внешний подрядчик (ML-специализация)** |
| **Бюджет (оценка)** | 5 000 000 – 7 000 000 ₽ (единовременно) + 100 000 ₽/мес |
| **Срок реализации** | 16-20 недель |
| **Связанные точки** | AUTO-003, DASH-05 |
| **Приоритет** | Стратегический (рост выручки) |

---

## ⚠️ ВАЖНОЕ ПРИМЕЧАНИЕ

> **Данный проект требует:**
> 1. **Проведения тендера** среди компаний с экспертизой в ML/AI и Revenue Management
> 2. **Завершения TZ-11** (парсинг цен конкурентов) — источник данных
> 3. **Пилотного проекта** на 2-3 направлениях перед полным внедрением
>
> Документ является **запросом на предложение (RFP)** с описанием бизнес-требований.

---

## 1. БИЗНЕС-КОНТЕКСТ

### 1.1. Проблема (AS-IS)

> **Формулировка проблемы:** Ценообразование чартерных туров выполняется **вручную 1 раз в день**, что приводит к потере маржи и «горению» непроданных мест.

**Текущий процесс:**

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         РУЧНОЕ ЦЕНООБРАЗОВАНИЕ                          │
│                                                                         │
│   06:00        09:00                    18:00                  23:59    │
│     │            │                        │                      │      │
│     ▼            ▼                        ▼                      ▼      │
│  ┌──────┐    ┌──────────┐            ┌──────────┐           ┌──────┐   │
│  │Анализ│───→│Установка │            │   ЦЕНА   │           │Горение│   │
│  │Excel │    │  цены    │            │НЕ МЕНЯЕТСЯ│           │ мест  │   │
│  │3 часа│    │ в САМО   │            │ ВЕСЬ ДЕНЬ │           │~20%   │   │
│  └──────┘    └──────────┘            └──────────┘           └──────┘   │
│                                                                         │
│   Реакция на рынок: 24-48 часов                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

**Критические проблемы:**

| # | Проблема | Последствия | Влияние |
|---|----------|-------------|---------|
| 1 | **Цены меняются 1 раз/день** | Конкуренты реагируют быстрее | Потеря клиентов |
| 2 | **Нет учёта загрузки рейса** | Продажа ниже себестоимости при полном рейсе | Потеря маржи |
| 3 | **Субъективные решения** | Зависимость от опыта тарификатора | Нестабильность |
| 4 | **«Горение» мест (~20%)** | Непроданные места на чартерах | Прямые убытки |
| 5 | **Нет истории решений** | Невозможно анализировать эффективность | Нет обучения |

**Какие системы используются:**
- **САМО-тур** — установка цен, бронирования
- **Excel** — анализ загрузки, история продаж
- **Сайты конкурентов** — ручной мониторинг (см. TZ-11)

**Кто выполняет работу:**
- Отдел тарификации (Баландина О.А.) — 3 человека
- Ведущий тарификатор — основные решения по ценам

**Количественные показатели проблемы:**

| Метрика | Текущее значение | Источник данных |
|---------|------------------|-----------------|
| Время на анализ и установку цен | 180 мин/день = **55 ч/мес** | Анкеты L3 |
| Частота изменения цен | 1 раз/день | Процесс |
| «Горение» мест на чартерах | ~20% | Статистика САМО |
| Туры ниже себестоимости | ~10-15% | Оценка финансов |
| Средняя маржа чартеров | ~12-15% | Оценка |
| Оборот чартерных направлений | ~100-150 млн ₽/год | Оценка |

**Причины проблемы:**
1. **Отсутствие алгоритма** — решения принимаются «по ощущениям»
2. **Нет данных в реальном времени** — загрузка рейсов, цены конкурентов
3. **Ограниченные ресурсы** — 3 человека не могут анализировать всё
4. **Страх автоматизации** — боязнь ошибок алгоритма
5. **Нет инструментов** — только Excel

### 1.2. Цель проекта (TO-BE)

> **Формулировка цели по SMART:**
> - **S**pecific: Создать ML-систему динамического ценообразования для чартерных туров
> - **M**easurable: +5-10% маржи, -50% «горения» мест, реакция на рынок <2 часов
> - **A**chievable: Аналогичные системы работают у авиакомпаний и крупных туроператоров
> - **R**elevant: Прямое влияние на прибыльность компании
> - **T**ime-bound: Пилот через 12 недель, полное внедрение через 20 недель

**Целевое состояние:**

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    ДИНАМИЧЕСКОЕ ЦЕНООБРАЗОВАНИЕ                         │
│                                                                         │
│   Каждые 2-4 часа (автоматически)                                       │
│                                                                         │
│  ┌─────────────┐   ┌─────────────┐   ┌─────────────┐   ┌─────────────┐  │
│  │  Загрузка   │   │    Цены     │   │   История   │   │  Внешние    │  │
│  │   рейса     │ + │ конкурентов │ + │   продаж    │ + │  факторы    │  │
│  │  (САМО)     │   │   (TZ-11)   │   │   (САМО)    │   │  (погода,   │  │
│  │             │   │             │   │             │   │   события)  │  │
│  └──────┬──────┘   └──────┬──────┘   └──────┬──────┘   └──────┬──────┘  │
│         │                 │                 │                 │         │
│         └─────────────────┼─────────────────┼─────────────────┘         │
│                           ▼                                             │
│                   ┌───────────────┐                                     │
│                   │  ML-АЛГОРИТМ  │                                     │
│                   │  (Pricing     │                                     │
│                   │   Engine)     │                                     │
│                   └───────┬───────┘                                     │
│                           │                                             │
│              ┌────────────┼────────────┐                                │
│              ▼            ▼            ▼                                │
│         ┌────────┐  ┌──────────┐  ┌────────────┐                        │
│         │Рекоменд.│  │Автоматич.│  │  Дашборд   │                        │
│         │  цена  │  │обновление│  │  контроля  │                        │
│         │        │  │ в САМО   │  │            │                        │
│         └────────┘  └──────────┘  └────────────┘                        │
│                                                                         │
│   Реакция на рынок: 2-4 часа                                            │
└─────────────────────────────────────────────────────────────────────────┘
```

**Что изменится:**
- **Цены обновляются каждые 2-4 часа** автоматически или по рекомендации
- **Учитывается загрузка рейса** — чем больше продано, тем выше цена
- **Учитываются цены конкурентов** (данные из TZ-11)
- **Учитывается сезонность и тренды** — ML обучается на истории
- **Тарификатор контролирует** — может подтвердить или отклонить рекомендацию

**Режимы работы системы:**

| Режим | Описание | Когда используется |
|-------|----------|-------------------|
| **Рекомендательный** | Система предлагает цену, человек подтверждает | Начальный этап, новые направления |
| **Полуавтоматический** | Система меняет цену в пределах ±10%, остальное — подтверждение | Основной режим |
| **Автоматический** | Система меняет цену без подтверждения | Проверенные направления, ночное время |

**Целевые показатели:**

| Метрика | AS-IS | TO-BE | Улучшение |
|---------|-------|-------|-----------|
| Время на ценообразование | 180 мин/день | 30 мин/день | **-83%** |
| Частота изменения цен | 1 раз/день | 6-12 раз/день | **+500%** |
| «Горение» мест | ~20% | <10% | **-50%** |
| Средняя маржа | 12-15% | 17-20% | **+5 п.п.** |
| Туры ниже себестоимости | 10-15% | <5% | **-66%** |
| Реакция на конкурентов | 24-48 ч | 2-4 ч | **-90%** |

### 1.3. Ожидаемый эффект (ROI)

| Показатель | Значение | Расчёт |
|------------|----------|--------|
| **Экономия времени** | 55 ч/мес | (180 − 30) мин × 22 дня ÷ 60 |
| **Экономия (время)** | 495 000 ₽/год | 55 ч × 750 ₽/ч × 12 мес |
| **Рост маржи (+5%)** | 5 000 000 – 7 500 000 ₽/год | 5% × 100-150 млн ₽ оборота |
| **Снижение «горения» (-50%)** | 2 000 000 – 3 000 000 ₽/год | Проданные места вместо пустых |
| **Суммарный эффект** | **8 000 000 – 11 000 000 ₽/год** | Все факторы |
| **Затраты на внедрение** | 5 000 000 – 7 000 000 ₽ | Тендер определит |
| **Ежегодные затраты** | 1 200 000 ₽/год | ML-инженер (частично) + инфраструктура |
| **Срок окупаемости** | **6-10 месяцев** | При минимальном эффекте |
| **ROI (год 1)** | **+30-80%** | (Эффект − Затраты) ÷ Затраты |

> **Примечание:** Это **самый высокодоходный проект** в roadmap автоматизации. Даже при минимальном эффекте (+3% маржи) окупается за год.

### 1.4. Scope (границы проекта)

**Входит в scope (Must Have):**
- [x] Алгоритм расчёта оптимальной цены (ML)
- [x] Интеграция с САМО-тур (чтение загрузки, запись цен)
- [x] Интеграция с TZ-11 (цены конкурентов)
- [x] Дашборд контроля и аналитики (Power BI)
- [x] Режим рекомендаций (человек подтверждает)
- [x] Пилот на 2-3 направлениях
- [x] Обучение тарификаторов

**Входит в scope (Should Have):**
- [ ] Полуавтоматический режим (±10% без подтверждения)
- [ ] A/B тестирование ценовых стратегий
- [ ] Прогноз продаж на 7-14 дней
- [ ] Алерты при аномалиях (резкое падение продаж)

**НЕ входит в scope (Won't Have в v1.0):**
- [ ] Автоматический режим (без подтверждения человека)
- [ ] Ценообразование регулярных туров (только чартеры)
- [ ] Ценообразование отелей (только пакеты с перелётом)
- [ ] Интеграция с другими туроператорами (пулы)

**Зависимости (что должно быть готово ДО начала):**

| ID | Зависимость | Ответственный | Статус | Критичность |
|----|-------------|---------------|--------|-------------|
| **TZ-11** | Парсинг цен конкурентов | IT / подрядчик | ⬜ | **Критично** |
| **P-01** | Аудит API САМО-тур | Логвинов Г.А. | ⬜ | Критично |
| — | Историч. данные продаж (2+ года) | Баландина О.А. | ⬜ | Критично |
| — | Данные загрузки рейсов | САМО-тур | ⬜ | Критично |

---

## 2. ФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ

### 2.1. Пользователи системы

| Роль | Описание | Кол-во | Ключевые задачи |
|------|----------|--------|-----------------|
| Тарификатор | Принимает решения по ценам | 3 | Просмотр рекомендаций, подтверждение/отклонение, анализ |
| Руководитель тарификации | Контролирует ценовую политику | 1 | Настройка правил, контроль KPI, стратегия |
| Data Scientist (поддержка) | Развитие алгоритма | 0.5 FTE | Мониторинг качества, дообучение модели |
| IT-администратор | Техническая поддержка | 1 | Мониторинг системы, инциденты |

### 2.2. Высокоуровневые требования

#### FR-01: Расчёт оптимальной цены (ML-алгоритм)

**Входные данные алгоритма:**

| Категория | Данные | Источник | Частота |
|-----------|--------|----------|---------|
| **Загрузка рейса** | % проданных мест, динамика продаж | САМО-тур API | Каждые 2 часа |
| **Цены конкурентов** | Мин/avg/max по направлению | TZ-11 (PostgreSQL) | Ежедневно |
| **История продаж** | Продажи за 2+ года по направлению | САМО-тур | При обучении |
| **Календарь событий** | Праздники, каникулы, события | Справочник | Статически |
| **Текущая цена** | Установленная цена в САМО | САМО-тур API | Real-time |
| **Себестоимость** | Минимальная цена | САМО-тур / 1С | Ежедневно |
| **Даты вылета** | Сколько дней до вылета | Расчёт | Real-time |

**Выходные данные алгоритма:**

| Параметр | Описание |
|----------|----------|
| **Рекомендуемая цена** | Оптимальная цена для максимизации маржи |
| **Границы** | Минимальная и максимальная допустимая цена |
| **Уверенность** | Уровень уверенности модели (0-100%) |
| **Причина изменения** | «Конкурент снизил цену», «Низкая загрузка», «Высокий спрос» |
| **Прогноз продаж** | Ожидаемое кол-во продаж при данной цене |

**Бизнес-правила (ограничения):**

| Правило | Описание |
|---------|----------|
| Минимальная цена | ≥ Себестоимость + 5% |
| Максимальная цена | ≤ Рыночная цена × 1.2 |
| Изменение за раз | Не более ±15% от текущей |
| Изменение за день | Не более ±30% от утренней |
| Последние 3 дня до вылета | Только снижение (распродажа) |

#### FR-02: Интеграция с САМО-тур

| Операция | Направление | API метод | Частота |
|----------|-------------|-----------|---------|
| Чтение загрузки рейсов | САМО → Система | GET /flights/load | Каждые 2 ч |
| Чтение текущих цен | САМО → Система | GET /tours/prices | Каждые 2 ч |
| Чтение бронирований | САМО → Система | GET /bookings | Каждые 2 ч |
| Запись новой цены | Система → САМО | PUT /tours/prices | По событию |
| Чтение себестоимости | САМО → Система | GET /tours/cost | Ежедневно |

> **Примечание:** Точная спецификация API зависит от результатов P-01 (аудит API САМО).

#### FR-03: Интеграция с TZ-11 (цены конкурентов)

| Данные | Источник | Формат |
|--------|----------|--------|
| Цены конкурентов по направлению | PostgreSQL (TZ-11) | SQL query |
| Мин/avg/max цена рынка | Агрегация | Числа |
| История изменений | PostgreSQL | Временной ряд |

#### FR-04: Интерфейс тарификатора (дашборд)

**Страница 1: Рекомендации**

| Элемент | Описание |
|---------|----------|
| Таблица направлений | Направление, текущая цена, рекомендуемая, разница, уверенность |
| Фильтры | Дата вылета, направление, изменение >X% |
| Действия | Подтвердить / Отклонить / Изменить вручную |
| Массовые действия | Подтвердить все с уверенностью >80% |

**Страница 2: Аналитика направления**

| Элемент | Описание |
|---------|----------|
| График загрузки | Динамика продаж vs план |
| График цен | Наши цены vs конкуренты (30 дней) |
| Прогноз | Ожидаемые продажи при текущей цене |
| История решений | Все изменения цен и их эффект |

**Страница 3: KPI и эффективность**

| Элемент | Описание |
|---------|----------|
| Общая маржа | Текущая vs целевая vs прошлый год |
| «Горение» мест | % непроданных мест на вылетевших рейсах |
| Эффективность алгоритма | % подтверждённых рекомендаций, точность прогнозов |
| Сравнение A/B | Если включено тестирование |

#### FR-05: Уведомления и алерты

| Событие | Канал | Получатель |
|---------|-------|------------|
| Конкурент снизил цену >15% | Telegram | Тарификатор |
| Загрузка <50% за 7 дней до вылета | Telegram | Тарификатор + Руководитель |
| Система не получила данные >2ч | Email | IT-отдел |
| Рекомендация отклонена 3+ раз подряд | Email | Руководитель |

### 2.3. Сводная таблица требований

| ID | Название | Приоритет | Критерий приёмки |
|----|----------|-----------|------------------|
| FR-01 | ML-алгоритм расчёта цены | Must | Точность прогноза >70%, ROI положительный |
| FR-02 | Интеграция с САМО | Must | Данные обновляются каждые 2ч, цены записываются |
| FR-03 | Интеграция с TZ-11 | Must | Данные конкурентов доступны |
| FR-04 | Дашборд тарификатора | Must | 3 страницы, все функции работают |
| FR-05 | Уведомления | Should | Telegram-алерты работают |

---

## 3. ТРЕБОВАНИЯ К ML-АЛГОРИТМУ

### 3.1. Постановка задачи

| Параметр | Значение |
|----------|----------|
| **Тип задачи** | Регрессия (предсказание оптимальной цены) + Оптимизация (максимизация маржи) |
| **Целевая метрика** | Маржа на рейс = (Выручка − Себестоимость) |
| **Горизонт прогноза** | 1-60 дней до вылета |
| **Частота расчёта** | Каждые 2-4 часа |
| **Объём данных** | ~50 направлений × 365 дней × 2 года = ~36 500 записей |

### 3.2. Features (признаки)

| Категория | Feature | Тип | Описание |
|-----------|---------|-----|----------|
| **Загрузка** | load_percent | float | % проданных мест |
| **Загрузка** | sales_velocity | float | Скорость продаж (брони/день) |
| **Загрузка** | days_to_departure | int | Дней до вылета |
| **Конкуренты** | competitor_min | float | Минимальная цена конкурентов |
| **Конкуренты** | competitor_avg | float | Средняя цена рынка |
| **Конкуренты** | price_position | enum | Дешевле/на уровне/дороже |
| **История** | same_period_last_year | float | Продажи в тот же период год назад |
| **История** | trend_7d | float | Тренд продаж за 7 дней |
| **Календарь** | is_holiday | bool | Праздничные дни |
| **Календарь** | is_school_vacation | bool | Школьные каникулы |
| **Календарь** | day_of_week | int | День недели |
| **Направление** | destination | cat | Страна/курорт |
| **Направление** | flight_type | cat | Чартер/регулярка |
| **Себестоимость** | cost_per_seat | float | Себестоимость места |

### 3.3. Возможные подходы к моделированию

| Подход | Описание | Плюсы | Минусы |
|--------|----------|-------|--------|
| **Gradient Boosting** (XGBoost, LightGBM) | Ансамбль деревьев | Хорошо работает с табличными данными, интерпретируемость | Требует feature engineering |
| **Neural Network** | Глубокое обучение | Автоматическое извлечение признаков | Требует много данных, «чёрный ящик» |
| **Reinforcement Learning** | Обучение с подкреплением | Оптимизация долгосрочной прибыли | Сложность, нужна симуляция |
| **Rule-based + ML** | Гибрид правил и ML | Контроль, понятность | Менее гибко |

> **Рекомендация:** Начать с **Gradient Boosting + Rule-based constraints**. Это даёт интерпретируемость и контроль, что критично для финансовых решений.

### 3.4. Метрики качества

| Метрика | Формула | Целевое значение |
|---------|---------|------------------|
| **MAE (Mean Absolute Error)** | Средняя ошибка прогноза цены | <5% от средней цены |
| **Точность направления** | % верных прогнозов «выше/ниже» | >70% |
| **Маржа (A/B тест)** | Маржа ML vs ручное | +5% и выше |
| **Acceptance Rate** | % подтверждённых рекомендаций | >60% |

### 3.5. Требования к данным

| Данные | Объём | Источник | Требования |
|--------|-------|----------|------------|
| История продаж | 2+ года | САМО-тур | Все бронирования с ценами, датами, загрузкой |
| История цен | 1+ год | САМО-тур | Цены по дням для каждого направления |
| Загрузка рейсов | 1+ год | САМО-тур | % проданных мест на каждую дату |
| Цены конкурентов | С момента запуска TZ-11 | PostgreSQL | Ежедневные данные |
| Календарь событий | Статически | Справочник | Праздники, каникулы |
| Себестоимость | Текущие | САМО / 1С | Себестоимость по направлениям |

### 3.6. Архитектура ML-системы

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          ML PIPELINE                                    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     DATA LAYER                                   │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐             │   │
│  │  │САМО-тур │  │ TZ-11   │  │  1С     │  │Календарь│             │   │
│  │  │  API    │  │PostgreSQL│ │(костинг)│  │(справ.) │             │   │
│  │  └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘             │   │
│  │       └────────────┼───────────┼────────────┘                   │   │
│  │                    ▼                                             │   │
│  │           ┌─────────────────┐                                    │   │
│  │           │  Feature Store  │ ← Подготовленные признаки          │   │
│  │           │   (PostgreSQL)  │                                    │   │
│  │           └────────┬────────┘                                    │   │
│  └────────────────────┼────────────────────────────────────────────┘   │
│                       ▼                                                 │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     MODEL LAYER                                  │   │
│  │                                                                  │   │
│  │  ┌──────────────────┐    ┌──────────────────┐                   │   │
│  │  │  Training        │    │  Inference       │                   │   │
│  │  │  Pipeline        │    │  Service         │                   │   │
│  │  │  (batch,         │    │  (online,        │                   │   │
│  │  │   weekly)        │    │   каждые 2ч)     │                   │   │
│  │  └──────────────────┘    └─────────┬────────┘                   │   │
│  │                                    │                             │   │
│  │                                    ▼                             │   │
│  │                          ┌─────────────────┐                     │   │
│  │                          │  Business Rules │ ← Ограничения       │   │
│  │                          │     Engine      │   (мин/макс цена)   │   │
│  │                          └────────┬────────┘                     │   │
│  └───────────────────────────────────┼─────────────────────────────┘   │
│                                      ▼                                  │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                   APPLICATION LAYER                              │   │
│  │                                                                  │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐           │   │
│  │  │  Dashboard   │  │  САМО API   │  │  Telegram    │           │   │
│  │  │  (Power BI)  │  │  (write)    │  │  (alerts)    │           │   │
│  │  └──────────────┘  └──────────────┘  └──────────────┘           │   │
│  └─────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 4. НЕФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ

### 4.1. Производительность

| Метрика | Требование |
|---------|------------|
| Время расчёта одного направления | < 1 секунды |
| Время расчёта всех направлений (50) | < 2 минут |
| Время загрузки дашборда | < 5 секунд |
| Частота обновления | Каждые 2-4 часа |

### 4.2. Надёжность

| Метрика | Требование |
|---------|------------|
| Uptime | > 99% (критично для бизнеса) |
| Резервирование | Fallback на последние рекомендации при сбое |
| Мониторинг качества модели | Автоматический алерт при деградации >10% |
| Версионирование моделей | История всех версий, откат за 5 мин |

### 4.3. Безопасность

| Требование | Реализация |
|------------|------------|
| Доступ к системе | Только авторизованные пользователи |
| Логирование решений | Все рекомендации и действия сохраняются |
| Audit trail | Кто подтвердил/отклонил, когда, почему |
| Резервное копирование | Ежедневно, хранение 1 год |

### 4.4. Интерпретируемость

| Требование | Реализация |
|------------|------------|
| **Объяснение рекомендации** | «Цена снижена из-за низкой загрузки (45%) за 10 дней до вылета» |
| **Feature importance** | Какие факторы повлияли на решение |
| **What-if анализ** | «Если снизить цену на 5%, продажи вырастут на ~X%» |

---

## 5. ЭТАПЫ РЕАЛИЗАЦИИ

### 5.1. Укрупнённый план

| Этап | Название | Длительность | Результат |
|------|----------|--------------|-----------|
| **0** | Подготовка данных | 2 недели | Исторические данные собраны и очищены |
| **1** | Тендер и выбор подрядчика | 3-4 недели | Контракт подписан |
| **2** | Анализ данных (EDA) | 2 недели | Отчёт о качестве данных, первые insights |
| **3** | Разработка модели (v1) | 4 недели | Работающий прототип ML |
| **4** | Интеграция с САМО + TZ-11 | 3 недели | Данные поступают, цены записываются |
| **5** | Разработка дашборда | 2 недели | Power BI дашборд |
| **6** | Тестирование | 2 недели | Протокол тестирования |
| **7** | Пилот (2-3 направления) | 4 недели | Реальная работа, оценка эффекта |
| **8** | Доработка модели | 2 недели | Улучшения по результатам пилота |
| **9** | Масштабирование | 2 недели | Все направления |
| **10** | Стабилизация | 2 недели | Передача в эксплуатацию |

**Итого:** 16-20 недель (без этапа 0 и тендера)

### 5.2. Пилотный проект

**Направления для пилота (рекомендация):**

| # | Направление | Почему |
|---|-------------|--------|
| 1 | Москва → Анталия | Высокий объём, много данных, конкурентный рынок |
| 2 | Москва → Хургада | Сезонность, высокая волатильность цен |
| 3 | СПб → Анталия | Второй хаб, проверка масштабируемости |

**Критерии успеха пилота:**

| Метрика | Порог успеха |
|---------|--------------|
| Маржа vs ручное управление | +3% и выше |
| «Горение» мест | −20% и выше |
| Acceptance rate (% подтверждений) | >50% |
| Отсутствие критических ошибок | 0 инцидентов |

### 5.3. Процедура тендера

**Критерии выбора подрядчика:**

| Критерий | Вес | Описание |
|----------|-----|----------|
| Опыт Revenue Management / Dynamic Pricing | 35% | Кейсы в авиации, туризме, ритейле |
| Опыт ML/Data Science | 25% | Квалификация команды |
| Понимание туристической отрасли | 15% | Специфика продукта |
| Стоимость | 15% | Соотношение цена/качество |
| План и сроки | 5% | Реалистичность |
| Поддержка | 5% | SLA, условия |

**Запрос предложений (RFP) должен включать:**
1. Портфолио проектов динамического ценообразования
2. Описание команды (Data Scientist, ML Engineer)
3. Предлагаемый подход к моделированию
4. Требования к данным
5. План проекта с этапами и milestones
6. Стоимость (разработка + поддержка)
7. KPI и гарантии результата

### 5.4. Риски

| # | Риск | Вероятность | Влияние | Митигация |
|---|------|-------------|---------|-----------|
| 1 | Недостаточно исторических данных | Средняя | Высокое | Начать сбор данных заранее, использовать transfer learning |
| 2 | Сопротивление тарификаторов | Средняя | Среднее | Режим рекомендаций, обучение, вовлечение |
| 3 | Ошибки алгоритма (ущерб) | Низкая | Высокое | Ограничения, режим подтверждения, страховка |
| 4 | Зависимость от TZ-11 | Высокая | Высокое | Внедрить TZ-11 первым, fallback на последние данные |
| 5 | Сложность интеграции с САМО | Средняя | Среднее | P-01 до начала, резервный план (файловый обмен) |
| 6 | Качество данных | Средняя | Высокое | Этап 0 — очистка и валидация данных |

---

## 6. ПРИЁМОЧНЫЕ ИСПЫТАНИЯ

### 6.1. Критерии приёмки MVP (после пилота)

| # | Критерий | Порог | Метод проверки |
|---|----------|-------|----------------|
| 1 | Рост маржи на пилотных направлениях | ≥ +3% vs ручное | A/B тест или сравнение с прошлым годом |
| 2 | Снижение «горения» | ≥ −20% | Статистика САМО |
| 3 | Acceptance rate | ≥ 50% | Логи системы |
| 4 | Точность прогнозов | ≥ 70% направление | Метрики модели |
| 5 | Uptime за пилот | ≥ 99% | Мониторинг |
| 6 | Нет критических ошибок | 0 инцидентов с убытками | Логи, финансы |

### 6.2. Процедура приёмки

1. **Завершение пилота** — 4 недели работы на реальных данных
2. **Анализ результатов** — подрядчик готовит отчёт с метриками
3. **Финансовый анализ** — бухгалтерия подтверждает эффект на маржу
4. **Решение о масштабировании** — если критерии пилота выполнены
5. **Масштабирование** — добавление остальных направлений
6. **Акт приёмки** — подписание после стабильной работы 2 недели

---

## 7. ДОКУМЕНТАЦИЯ И ОБУЧЕНИЕ

### 7.1. Документация от подрядчика

| Документ | Срок |
|----------|------|
| Описание ML-модели (Model Card) | До пилота |
| Технический дизайн архитектуры | До этапа разработки |
| Руководство пользователя (тарификаторы) | До пилота |
| Руководство администратора | До масштабирования |
| Runbook (инструкции по инцидентам) | До масштабирования |
| Отчёт о результатах пилота | После пилота |

### 7.2. Обучение

| Группа | Формат | Длительность | Когда |
|--------|--------|--------------|-------|
| Тарификаторы (3 чел.) | Вебинар + практика | 4 часа | Начало пилота |
| Руководитель тарификации | Индивидуально | 3 часа | До пилота |
| Data Scientist (поддержка) | Передача знаний | 8 часов | При внедрении |
| IT-администратор | Индивидуально | 2 часа | При внедрении |

---

## 8. ПОДДЕРЖКА И SLA

### 8.1. Гарантийный период

- **Длительность:** 6 месяцев с момента подписания акта
- **Включает:**
  - Исправление дефектов
  - Дообучение модели (до 2 раз)
  - Консультации
  - Мониторинг качества
- **Не включает:** Новая функциональность, новые направления (после масштабирования)

### 8.2. SLA (после гарантии)

| Приоритет | Описание | Время реакции | Время решения |
|-----------|----------|---------------|---------------|
| P1 — Критический | Система не выдаёт рекомендации | 1 час | 4 часа |
| P2 — Высокий | Ошибочные рекомендации (убытки) | 4 часа | 1 рабочий день |
| P3 — Средний | Деградация качества модели | 1 рабочий день | 1 неделя |
| P4 — Низкий | Улучшения, отчёты | 3 рабочих дня | По согласованию |

### 8.3. Стоимость постоянной поддержки

| Компонент | Оценка | Описание |
|-----------|--------|----------|
| ML-инженер (0.5 FTE) | 80 000 – 120 000 ₽/мес | Мониторинг, дообучение, улучшения |
| Инфраструктура | 20 000 – 30 000 ₽/мес | Сервер, ML-инструменты |
| **Итого** | **100 000 – 150 000 ₽/мес** | Постоянные затраты |

> **Рекомендация:** При эффекте 8-11 млн ₽/год затраты на поддержку (~1.5 млн ₽/год) полностью оправданы.

---

## ПРИЛОЖЕНИЯ

### Приложение A: Пример рекомендации системы

```json
{
  "direction": "MOW-AYT",
  "departure_date": "2026-06-15",
  "calculation_time": "2026-05-15T08:00:00Z",

  "current_state": {
    "current_price": 75000,
    "load_percent": 42,
    "days_to_departure": 31,
    "competitor_min": 68000,
    "competitor_avg": 73500
  },

  "recommendation": {
    "recommended_price": 69900,
    "change_percent": -6.8,
    "confidence": 78,
    "reason": "Низкая загрузка (42%) при высокой конкуренции (мин. 68 000 ₽). Снижение цены ускорит продажи.",
    "expected_effect": "+15 бронирований за 7 дней"
  },

  "constraints": {
    "min_price": 62000,
    "max_price": 85000,
    "cost_per_seat": 58000
  },

  "alternatives": [
    {"price": 72000, "expected_bookings": 8, "margin": 14000},
    {"price": 69900, "expected_bookings": 15, "margin": 11900},
    {"price": 67000, "expected_bookings": 22, "margin": 9000}
  ]
}
```

### Приложение B: Дашборд — макет (wireframe)

```
┌─────────────────────────────────────────────────────────────────────────┐
│  ДИНАМИЧЕСКОЕ ЦЕНООБРАЗОВАНИЕ — Рекомендации           [Обновить]      │
├─────────────────────────────────────────────────────────────────────────┤
│  Фильтры: [Направление ▼] [Дата вылета ▼] [Изменение >5% ☑]           │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │ Направление    │ Вылет    │ Загрузка │ Сейчас  │ Рекоменд. │ Δ%   │ │
│  ├────────────────┼──────────┼──────────┼─────────┼───────────┼──────┤ │
│  │ MOW → AYT      │ 15.06    │ 42%      │ 75 000  │ 69 900 ▼  │ -6.8%│ │
│  │ [Подтвердить] [Отклонить] [Изменить]                              │ │
│  ├────────────────┼──────────┼──────────┼─────────┼───────────┼──────┤ │
│  │ MOW → HRG      │ 18.06    │ 78%      │ 55 000  │ 59 900 ▲  │ +8.9%│ │
│  │ [Подтвердить] [Отклонить] [Изменить]                              │ │
│  ├────────────────┼──────────┼──────────┼─────────┼───────────┼──────┤ │
│  │ LED → AYT      │ 20.06    │ 55%      │ 72 000  │ 72 000 ─  │  0%  │ │
│  │ [Без изменений]                                                   │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  [✓ Подтвердить все с уверенностью >80%]                               │
│                                                                         │
│  ─────────────────────────────────────────────────────────────────────  │
│  KPI за неделю:                                                         │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐                │
│  │ Маржа    │  │ Горение  │  │Подтвержд.│  │ Точность │                │
│  │ +4.2%    │  │ -18%     │  │ 67%      │  │ 73%      │                │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘                │
└─────────────────────────────────────────────────────────────────────────┘
```

### Приложение C: Глоссарий

| Термин | Определение |
|--------|-------------|
| **Revenue Management** | Управление доходами — дисциплина оптимизации цен и запасов |
| **Dynamic Pricing** | Динамическое ценообразование — автоматическое изменение цен в зависимости от спроса |
| **Yield** | Доход на единицу (место, номер) |
| **Load Factor** | Загрузка — % проданных мест |
| **ASP (Average Selling Price)** | Средняя цена продажи |
| **Feature** | Признак — входная переменная для ML-модели |
| **Inference** | Инференс — применение обученной модели для предсказаний |
| **A/B Test** | Сравнительный эксперимент двух вариантов |
| **Acceptance Rate** | Доля принятых рекомендаций |
| **«Горение» мест** | Непроданные места на вылетевших рейсах |

---

## ИСТОРИЯ ИЗМЕНЕНИЙ

| Версия | Дата | Автор | Изменения |
|--------|------|-------|-----------|
| 1.0 | 2026-02-19 | Claude Code | Первоначальная версия (RFP) |

---

## СОГЛАСОВАНИЯ

| Роль | ФИО | Дата | Статус |
|------|-----|------|--------|
| Заказчик (операционные доходы) | Баландина О.А. | | ⬜ |
| Директор по продажам | | | ⬜ |
| Руководитель IT | Логвинов Г.А. | | ⬜ |
| Финансовый директор | Назарикова М.В. | | ⬜ |
| Генеральный директор | | | ⬜ |

---

## СЛЕДУЮЩИЕ ШАГИ

| # | Действие | Ответственный | Срок | Зависимость |
|---|----------|---------------|------|-------------|
| 1 | **Завершить TZ-11** (парсинг цен) | IT / подрядчик | — | **КРИТИЧНО** |
| 2 | Собрать исторические данные (2+ года) | Баландина О.А. | 2 недели | — |
| 3 | Провести аудит API САМО (P-01) | Логвинов Г.А. | 1 неделя | — |
| 4 | Согласовать ТЗ с руководством | Баландина О.А. | 1 неделя | — |
| 5 | Сформировать список подрядчиков | IT + Закупки | 1 неделя | — |
| 6 | Рассылка RFP | Закупки | 1 день | п.4, п.5 |
| 7 | Сбор предложений | Закупки | 3 недели | п.6 |
| 8 | Оценка и выбор | Комиссия | 1 неделя | п.7 |
| 9 | Подписание контракта | Юристы | 1 неделя | п.8 |
| 10 | Старт проекта | Подрядчик | — | п.1, п.9 |

---

## РЕЗЮМЕ ДЛЯ РУКОВОДСТВА

**Проект «Динамическое ценообразование»** — самый высокодоходный в программе автоматизации.

| Показатель | Значение |
|------------|----------|
| **Инвестиции** | 5-7 млн ₽ + 1.5 млн ₽/год |
| **Эффект** | 8-11 млн ₽/год (+5-10% маржи) |
| **Окупаемость** | 6-10 месяцев |
| **ROI** | +30-80% в первый год |
| **Риск** | Средний (зависит от данных и внедрения TZ-11) |

**Рекомендация:** Запустить после успешного внедрения TZ-11 (парсинг цен конкурентов).
